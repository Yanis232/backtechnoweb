<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Administration</title>
    <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">
    <link rel="stylesheet" href="admin.css">
</head>

<body>
    <!-- En-tête -->
    <header class="top-bar">
        <div class="logo">
            <img src="logo.png" alt="Logo">
        </div>
        <nav class="nav-menu">
            <a href="manage-products.html" class="nav-link">
                <i class="bx bxs-box"></i>
                <span>Manage Products</span>
            </a>
            <a href="manage-clients.html" class="nav-link">
                <i class="bx bxs-user"></i>
                <span>Manage Clients</span>
            </a>
            <a href="manage-orders.html" class="nav-link">
                <i class="bx bxs-cart"></i>
                <span>Manage Orders</span>
            </a>
            <!-- Bouton de déconnexion -->
            <a class="logout-btn" href="javascript:void(0);" onclick="logout()">
                <i class="bx bx-log-out"></i>
                Déconnexion
            </a>
        </nav>
    </header>

    <!-- Tableau de bord -->
    <main class="dashboard">
        <!-- Section des statistiques -->
        <section class="stats-section">
            <h2>Statistiques</h2>
            <div class="stats-grid">
                <div class="stats-card">
                    <h3>Visiteurs</h3>
                    <p>1,245</p>
                </div>
        
                <div class="stats-card">
                    <h3>Clients</h3>
                    <p id="clients-count">Chargement...</p>
                </div>
                
                <div class="stats-card">
                    <h3>Temps moyen par visiteur</h3>
                    <p>5m 32s</p>
                </div>
            </div>
            <div class="stats-filter">
                <label for="filter">Filtrer par :</label>
                <select id="filter">
                    <option>Derniers 24h</option>
                    <option>Dernier Mois</option>
                    <option>Dernière Année</option>
                </select>
            </div>
        </section>

        <!-- Section des commandes récentes -->
        <section class="orders-section">
            <h2>Commandes Récentes</h2>
            <table class="orders-table">
                <thead>
                    <tr>
                        <th>Numéro de Commande</th>
                        <th>Date</th>
                        <th>Total</th>
                        <th>Détails</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>#12345</td>
                        <td>12/12/2024</td>
                        <td>89,50€</td>
                        <td><a href="#">Voir</a></td>
                    </tr>
                    <tr>
                        <td>#12344</td>
                        <td>11/12/2024</td>
                        <td>45,20€</td>
                        <td><a href="#">Voir</a></td>
                    </tr>
                    <tr>
                        <td>#12343</td>
                        <td>10/12/2024</td>
                        <td>25,30€</td>
                        <td><a href="#">Voir</a></td>
                    </tr>
                </tbody>
            </table>
            <a href="manage-orders.html" class="view-all">Voir toutes les commandes</a>
        </section>
    </main>

    <!-- Pied de page -->
    <footer>
        <p>&copy; 2024 L'Arbre En Vie - Tous droits réservés</p>
    </footer>

    <script>
        function logout() {
            localStorage.removeItem("isLoggedIn");
            localStorage.removeItem("username");
            localStorage.removeItem("userId");

            window.location.href = "accueil.html"; // Redirige vers la page d'accueil après déconnexion
        }
    </script>
    <script>
        // Fonction pour obtenir le nombre d'utilisateurs (clients)
        function getClientsCount() {
            fetch('http://localhost:3000/api/clients-count') // URL de l'API backend
                .then(response => response.json())
                .then(data => {
                    const clientCount = data.clientCount;
                    // Mettre à jour la statistique sur la page admin.html
                    document.getElementById('clients-count').textContent = clientCount;
                })
                .catch(error => {
                    console.error('Erreur lors de la récupération du nombre de clients:', error);
                });
        }
    
        // Appeler la fonction au chargement de la page
        window.onload = function() {
            getClientsCount();
        };
    </script>
    

    <script src="theme.js"></script>
    <!-- Bouton de changement de thème -->
    <div id="theme-toggle">
        <button id="theme-toggle-btn" title="Changer le thème">
            <i class="bx bx-sun"></i>
        </button>
    </div>
</body>

</html>
